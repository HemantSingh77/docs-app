<!doctype html>
<!--[if IE 8]>
<html lang="ru-ru" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]>
<html lang="ru-ru" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="ru-ru" class="no-js">
<!--<![endif]-->








    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <script type="text/javascript" src="/assets/js/viewport-min-width.js?v1547319779866581049"></script>
        <meta name="description"
              content="Official Phalcon Documentation">
        <meta name="keywords" content="php, phalcon, phalcon php, php framework, faster php framework, php extension, next generation framework, docs, documentation">
        <meta name="author" href="/humans.txt">
        <meta name="generator" content="Phalcon Team - Jekyll - Netlify">

        <link href="http://0.0.0.0:4000/3.4/ru-ru/assets.html" rel="canonical">
        <title>Phalcon Framework Documentation</title>

        <!-- Twitter -->
        <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="@zephirlang">
        <meta name="twitter:creator" content="@zephirlang">
        <meta name="twitter:title" content="Phalcon Framework Documentation">
        <meta name="twitter:description" content="Official Phalcon Documentation">
        <meta name="twitter:image" content="https://assets.phalconphp.com/phalcon/logo.png">

        <!-- Facebook -->
        <meta property="og:url" content="http://0.0.0.0:4000">
        <meta property="og:title" content="Phalcon Framework Documentation">
        <meta property="og:description" content="Official Phalcon Documentation">
        <meta property="og:type" content="website">
        <meta property="og:image" content="https://assets.phalconphp.com/phalcon/logo.png">

        <meta name="msapplication-TileColor" content="#FFFFFF">
        <meta name="msapplication-square70x70logo"
              content="https://assets.phalconphp.com/phalcon/icons/mstile-70x70.png">
        <meta name="msapplication-TileImage"
              content="https://assets.phalconphp.com/phalcon/icons/mstile-144x144.png">
        <meta name="msapplication-square150x150logo"
              content="https://assets.phalconphp.com/phalcon/icons/mstile-150x150.png">
        <meta name="msapplication-wide310x150logo"
              content="https://assets.phalconphp.com/phalcon/icons/mstile-310x150.png">
        <meta name="msapplication-square310x310logo"
              content="https://assets.phalconphp.com/phalcon/icons/mstile-310x310.png">

        <link rel="apple-touch-icon"
              href="https://assets.phalconphp.com/phalcon/icons/apple-touch-icon.png">

        <link rel="apple-touch-icon-precomposed"
              sizes="57x57"
              href="https://assets.phalconphp.com/phalcon/icons/apple-touch-icon-57x57.png">
        <link rel="apple-touch-icon-precomposed"
              sizes="60x60"
              href="https://assets.phalconphp.com/phalcon/icons/apple-touch-icon-60x60.png">
        <link rel="apple-touch-icon-precomposed"
              sizes="72x72"
              href="https://assets.phalconphp.com/phalcon/icons/apple-touch-icon-72x72.png">
        <link rel="apple-touch-icon-precomposed"
              sizes="76x76"
              href="https://assets.phalconphp.com/phalcon/icons/apple-touch-icon-76x76.png">
        <link rel="apple-touch-icon-precomposed"
              sizes="114x114"
              href="https://assets.phalconphp.com/phalcon/icons/apple-touch-icon-114x114.png">
        <link rel="apple-touch-icon-precomposed"
              sizes="120x120"
              href="https://assets.phalconphp.com/phalcon/icons/apple-touch-icon-120x120.png">
        <link rel="apple-touch-icon-precomposed"
              sizes="144x144"
              href="https://assets.phalconphp.com/phalcon/icons/apple-touch-icon-144x144.png">
        <link rel="apple-touch-icon-precomposed"
              sizes="152x152"
              href="https://assets.phalconphp.com/phalcon/icons/apple-touch-icon-152x152.png">

        <link rel="icon"
              type="image/png"
              sizes="16x16"
              href="https://assets.phalconphp.com/phalcon/icons/favicon-16x16.png">
        <link rel="icon"
              type="image/png"
              sizes="32x32"
              href="https://assets.phalconphp.com/phalcon/icons/favicon-32x32.png">
        <link rel="icon"
              type="image/png"
              sizes="96x96"
              href="https://assets.phalconphp.com/phalcon/icons/favicon-96x96.png">
        <link rel="icon"
              type="image/png"
              sizes="128x128"
              href="https://assets.phalconphp.com/phalcon/icons/favicon-128x128.png">
        <link rel="icon"
              type="image/png"
              sizes="196x196"
              href="https://assets.phalconphp.com/phalcon/icons/favicon-196x196.png">
        <link rel="shortcut icon"
              type="image/png"
              href="https://assets.phalconphp.com/phalcon/favicon.ico"/>

        <link rel="alternate"
              type="application/rss+xml"
              title=" - "
              href="http://0.0.0.0:4000/feed.xml">

        <link rel="stylesheet"
              href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css"
              integrity="sha256-eSi1q2PG6J7g7ib17yAaWMcrr5GrtohYChqibrV7PBE="
              crossorigin="anonymous" />
        <link rel="stylesheet" href="/assets/css/monokai.css?v1547319779866581049" />
        <link rel="stylesheet" href="/assets/css/style.css?v1547319779866581049" />

        <script defer src="https://use.fontawesome.com/releases/v5.6.1/js/all.js"
                integrity="sha384-R5JkiUweZpJjELPWqttAYmYM1P3SNEJRM6ecTQF05pFFtxmCO+Y1CiUhvuDzgSVZ"
                crossorigin="anonymous"></script>
        
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-90300500-6"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-90300500-6');
    </script>

    </head>


<body onclick="o2.allNavSlideUp()">
    <header class="header-image-doc">
        <div class="container">
            <div class="header-wrapper">
                <div class="clearfix">
                    <div class="row">
                        <div class="col-md-2 col-sm-3  col-xs-8">
                            <div class="header-image__logo-wrapper">
                                <a href="/3.4/ru-ru">
                                    <img class="logo-img" src="/assets/images/header_logo.svg" alt="logo">
                                </a>
                            </div>
                        </div>
                        <div class="col-md-10 col-sm-9 top-menu">

                            <div class="nav-icon" onclick="o2.showMobileMenu();">
                                <div class="nav-line"></div>
                                <div class="nav-line"></div>
                                <div class="nav-line"></div>
                            </div>
                            <nav class="header-nav">
                                <ul>
                                    <li class="nav-item" onclick="o2.toggleState(this, event);">
                                        <div class="nav-item_selected">
                                            <img class="lang-image"
                                                 src="https://d2srrzh48sp2nh.cloudfront.net/31cd209e/images/flags/ru.png"
                                                 alt="">
                                            <span class="caret"></span>
                                        </div>
                                        <div class="nav-item__list" onclick="event.stopPropagation();">
                                            
                                                <a href="/3.4/en/assets" class="custom-select__list-item">
                                                    <img class="lang-image"
                                                         src="https://d2srrzh48sp2nh.cloudfront.net/31cd209e/images/flags/en-US.png"
                                                         alt="English (US)">
                                                    English (US)
                                                </a>
                                            
                                                <a href="/3.4/cs-cz/assets" class="custom-select__list-item">
                                                    <img class="lang-image"
                                                         src="https://d2srrzh48sp2nh.cloudfront.net/31cd209e/images/flags/cs.png"
                                                         alt="Czech">
                                                    Czech
                                                </a>
                                            
                                                <a href="/3.4/de-de/assets" class="custom-select__list-item">
                                                    <img class="lang-image"
                                                         src="https://d2srrzh48sp2nh.cloudfront.net/31cd209e/images/flags/de.png"
                                                         alt="German">
                                                    German
                                                </a>
                                            
                                                <a href="/3.4/es-es/assets" class="custom-select__list-item">
                                                    <img class="lang-image"
                                                         src="https://d2srrzh48sp2nh.cloudfront.net/31cd209e/images/flags/es-ES.png"
                                                         alt="Spanish">
                                                    Spanish
                                                </a>
                                            
                                                <a href="/3.4/fa-ir/assets" class="custom-select__list-item">
                                                    <img class="lang-image"
                                                         src="https://d2srrzh48sp2nh.cloudfront.net/31cd209e/images/flags/fa.png"
                                                         alt="Persian">
                                                    Persian
                                                </a>
                                            
                                                <a href="/3.4/fr-fr/assets" class="custom-select__list-item">
                                                    <img class="lang-image"
                                                         src="https://d2srrzh48sp2nh.cloudfront.net/31cd209e/images/flags/fr.png"
                                                         alt="French">
                                                    French
                                                </a>
                                            
                                                <a href="/3.4/id-id/assets" class="custom-select__list-item">
                                                    <img class="lang-image"
                                                         src="https://d2srrzh48sp2nh.cloudfront.net/31cd209e/images/flags/id.png"
                                                         alt="Indonesian">
                                                    Indonesian
                                                </a>
                                            
                                                <a href="/3.4/it-it/assets" class="custom-select__list-item">
                                                    <img class="lang-image"
                                                         src="https://d2srrzh48sp2nh.cloudfront.net/31cd209e/images/flags/it.png"
                                                         alt="Italian">
                                                    Italian
                                                </a>
                                            
                                                <a href="/3.4/ja-jp/assets" class="custom-select__list-item">
                                                    <img class="lang-image"
                                                         src="https://d2srrzh48sp2nh.cloudfront.net/31cd209e/images/flags/ja.png"
                                                         alt="Japanese">
                                                    Japanese
                                                </a>
                                            
                                                <a href="/3.4/pl-pl/assets" class="custom-select__list-item">
                                                    <img class="lang-image"
                                                         src="https://d2srrzh48sp2nh.cloudfront.net/31cd209e/images/flags/pl.png"
                                                         alt="Polish">
                                                    Polish
                                                </a>
                                            
                                                <a href="/3.4/ru-ru/assets" class="custom-select__list-item">
                                                    <img class="lang-image"
                                                         src="https://d2srrzh48sp2nh.cloudfront.net/31cd209e/images/flags/ru.png"
                                                         alt="Russian">
                                                    Russian
                                                </a>
                                            
                                                <a href="/3.4/tr-tr/assets" class="custom-select__list-item">
                                                    <img class="lang-image"
                                                         src="https://d2srrzh48sp2nh.cloudfront.net/31cd209e/images/flags/tr.png"
                                                         alt="Turkish">
                                                    Turkish
                                                </a>
                                            
                                                <a href="/3.4/uk-ua/assets" class="custom-select__list-item">
                                                    <img class="lang-image"
                                                         src="https://d2srrzh48sp2nh.cloudfront.net/31cd209e/images/flags/uk.png"
                                                         alt="Ukrainian">
                                                    Ukrainian
                                                </a>
                                            
                                                <a href="/3.4/zh-cn/assets" class="custom-select__list-item">
                                                    <img class="lang-image"
                                                         src="https://d2srrzh48sp2nh.cloudfront.net/31cd209e/images/flags/zh-CN.png"
                                                         alt="Chinese Simplified">
                                                    Chinese Simplified
                                                </a>
                                            
                                        </div>
                                    </li>

                                        <li class="nav-item" onclick="o2.toggleState(this, event);">
                                            <div class="nav-item__selected custom-select__version">
                                                Version 3.4
                                                <span class="caret"></span>
                                            </div>
                                            <div class="nav-item__list" onclick="event.stopPropagation();">
                                                
                                                <a href="/3.4/ru-ru/assets" class="custom-select__list-item">
                                                    <span>3.4</span>
                                                </a>
                                                
                                                <a href="/3.3/ru-ru/assets" class="custom-select__list-item">
                                                    <span>3.3</span>
                                                </a>
                                                
                                                <a href="/3.2/ru-ru/assets" class="custom-select__list-item">
                                                    <span>3.2</span>
                                                </a>
                                                
                                                <a href="/3.1/ru-ru/assets" class="custom-select__list-item">
                                                    <span>3.1</span>
                                                </a>
                                                
                                                <a href="/4.0/ru-ru/assets" class="custom-select__list-item">
                                                    <span>4.0</span>
                                                </a>
                                                
                                            </div>
                                        </li>

                                    <li class="nav-item" onclick="o2.toggleState(this, event);">
                                        <div class="nav-item_selected">
                                            Community
                                            <span class="caret"></span>
                                        </div>
                                        <div class="nav-item__list">
                                            <a href="https://phalcon.link/forum" class="custom-select__list-item" target="_blank">
                                                Forum
                                            </a>
                                            <a href="https://phalcon.link/blog" class="custom-select__list-item" target="_blank">
                                                Blog
                                            </a>
                                            <a href="https://phalcon.link/resources" class="custom-select__list-item" target="_blank">
                                                Resources
                                            </a>
                                            <div class="nav-item__divider"></div>
                                            <a href="https://phalcon.link/f" class="custom-select__list-item" target="_blank">
                                                Facebook
                                            </a>
                                            <a href="https://phalcon.link/t" class="custom-select__list-item" target="_blank">
                                                Twitter
                                            </a>
                                            <a href="https://phalcon.link/gab" class="custom-select__list-item" target="_blank">
                                                Gab.ai
                                            </a>
                                        </div>
                                    </li>
                                    <li class="nav-item">
                                        <a href="https://phalcon.link/about">
                                            About
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="https://phalcon.link/sponsors">
                                            Sponsors
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="https://phalcon.link/fund">
                                            Support Us
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="https://phalcon.link/download">
                                            Download
                                        </a>
                                    </li>
                                </ul>
                            </nav>
                        </div>

                        <div class="header-nav-mobile">
                            <div>
                                <div class="nav-item nav-item-accordion" onclick="o2.topicsAccordion(this, event)">
                                    <img class="lang-image"
                                         src="https://d2srrzh48sp2nh.cloudfront.net/31cd209e/images/flags/ru.png"
                                         alt="">
                                    <span class="caret"></span>
                                </div>

                                <ul style="display:none;" class="clearfix" onclick="event.stopPropagation();">
                                    
                                    <li class="nav-item nav-item-li col-sm-3 col-xs-6">
                                        <a href="/3.4/en/assets">
                                            <img class="lang-image"
                                                 src="https://d2srrzh48sp2nh.cloudfront.net/31cd209e/images/flags/en-US.png"
                                                 alt="English (US)">
                                            <span></span>
                                        </a>
                                    </li>
                                    
                                    <li class="nav-item nav-item-li col-sm-3 col-xs-6">
                                        <a href="/3.4/cs-cz/assets">
                                            <img class="lang-image"
                                                 src="https://d2srrzh48sp2nh.cloudfront.net/31cd209e/images/flags/cs.png"
                                                 alt="Czech">
                                            <span></span>
                                        </a>
                                    </li>
                                    
                                    <li class="nav-item nav-item-li col-sm-3 col-xs-6">
                                        <a href="/3.4/de-de/assets">
                                            <img class="lang-image"
                                                 src="https://d2srrzh48sp2nh.cloudfront.net/31cd209e/images/flags/de.png"
                                                 alt="German">
                                            <span></span>
                                        </a>
                                    </li>
                                    
                                    <li class="nav-item nav-item-li col-sm-3 col-xs-6">
                                        <a href="/3.4/es-es/assets">
                                            <img class="lang-image"
                                                 src="https://d2srrzh48sp2nh.cloudfront.net/31cd209e/images/flags/es-ES.png"
                                                 alt="Spanish">
                                            <span></span>
                                        </a>
                                    </li>
                                    
                                    <li class="nav-item nav-item-li col-sm-3 col-xs-6">
                                        <a href="/3.4/fa-ir/assets">
                                            <img class="lang-image"
                                                 src="https://d2srrzh48sp2nh.cloudfront.net/31cd209e/images/flags/fa.png"
                                                 alt="Persian">
                                            <span></span>
                                        </a>
                                    </li>
                                    
                                    <li class="nav-item nav-item-li col-sm-3 col-xs-6">
                                        <a href="/3.4/fr-fr/assets">
                                            <img class="lang-image"
                                                 src="https://d2srrzh48sp2nh.cloudfront.net/31cd209e/images/flags/fr.png"
                                                 alt="French">
                                            <span></span>
                                        </a>
                                    </li>
                                    
                                    <li class="nav-item nav-item-li col-sm-3 col-xs-6">
                                        <a href="/3.4/id-id/assets">
                                            <img class="lang-image"
                                                 src="https://d2srrzh48sp2nh.cloudfront.net/31cd209e/images/flags/id.png"
                                                 alt="Indonesian">
                                            <span></span>
                                        </a>
                                    </li>
                                    
                                    <li class="nav-item nav-item-li col-sm-3 col-xs-6">
                                        <a href="/3.4/it-it/assets">
                                            <img class="lang-image"
                                                 src="https://d2srrzh48sp2nh.cloudfront.net/31cd209e/images/flags/it.png"
                                                 alt="Italian">
                                            <span></span>
                                        </a>
                                    </li>
                                    
                                    <li class="nav-item nav-item-li col-sm-3 col-xs-6">
                                        <a href="/3.4/ja-jp/assets">
                                            <img class="lang-image"
                                                 src="https://d2srrzh48sp2nh.cloudfront.net/31cd209e/images/flags/ja.png"
                                                 alt="Japanese">
                                            <span></span>
                                        </a>
                                    </li>
                                    
                                    <li class="nav-item nav-item-li col-sm-3 col-xs-6">
                                        <a href="/3.4/pl-pl/assets">
                                            <img class="lang-image"
                                                 src="https://d2srrzh48sp2nh.cloudfront.net/31cd209e/images/flags/pl.png"
                                                 alt="Polish">
                                            <span></span>
                                        </a>
                                    </li>
                                    
                                    <li class="nav-item nav-item-li col-sm-3 col-xs-6">
                                        <a href="/3.4/ru-ru/assets">
                                            <img class="lang-image"
                                                 src="https://d2srrzh48sp2nh.cloudfront.net/31cd209e/images/flags/ru.png"
                                                 alt="Russian">
                                            <span></span>
                                        </a>
                                    </li>
                                    
                                    <li class="nav-item nav-item-li col-sm-3 col-xs-6">
                                        <a href="/3.4/tr-tr/assets">
                                            <img class="lang-image"
                                                 src="https://d2srrzh48sp2nh.cloudfront.net/31cd209e/images/flags/tr.png"
                                                 alt="Turkish">
                                            <span></span>
                                        </a>
                                    </li>
                                    
                                    <li class="nav-item nav-item-li col-sm-3 col-xs-6">
                                        <a href="/3.4/uk-ua/assets">
                                            <img class="lang-image"
                                                 src="https://d2srrzh48sp2nh.cloudfront.net/31cd209e/images/flags/uk.png"
                                                 alt="Ukrainian">
                                            <span></span>
                                        </a>
                                    </li>
                                    
                                    <li class="nav-item nav-item-li col-sm-3 col-xs-6">
                                        <a href="/3.4/zh-cn/assets">
                                            <img class="lang-image"
                                                 src="https://d2srrzh48sp2nh.cloudfront.net/31cd209e/images/flags/zh-CN.png"
                                                 alt="Chinese Simplified">
                                            <span></span>
                                        </a>
                                    </li>
                                    
                                </ul>

                            </div>
                            <div>
                                <div class="nav-item nav-item-accordion" onclick="o2.topicsAccordion(this,event)">
                                    Version 3.4
                                    <span class="caret"></span>
                                </div>

                                <ul style="display:none;" class="clearfix" onclick="event.stopPropagation();">
                                    
                                    <li class="nav-item nav-item-li col-xs-12">
                                        <a href="/3.4/ru-ru/assets">
                                            <span>3.4</span>
                                        </a>
                                    </li>
                                    
                                    <li class="nav-item nav-item-li col-xs-12">
                                        <a href="/3.3/ru-ru/assets">
                                            <span>3.3</span>
                                        </a>
                                    </li>
                                    
                                    <li class="nav-item nav-item-li col-xs-12">
                                        <a href="/3.2/ru-ru/assets">
                                            <span>3.2</span>
                                        </a>
                                    </li>
                                    
                                    <li class="nav-item nav-item-li col-xs-12">
                                        <a href="/3.1/ru-ru/assets">
                                            <span>3.1</span>
                                        </a>
                                    </li>
                                    
                                    <li class="nav-item nav-item-li col-xs-12">
                                        <a href="/4.0/ru-ru/assets">
                                            <span>4.0</span>
                                        </a>
                                    </li>
                                    
                                </ul>

                            </div>
                            <div>
                                <div class="nav-item nav-item-accordion" onclick="o2.topicsAccordion(this, event)">
                                    
                                    <span class="caret"></span>
                                </div>
                                <ul style="display:none;">
                                    <li class="nav-item nav-item-li">
                                        <a href="https://phalcon.link/forum" target="_blank">
                                            Forum
                                        </a>
                                    </li>
                                    <li class="nav-item nav-item-li">
                                        <a href="https://phalcon.link/blog" target="_blank">
                                            Blog
                                        </a>
                                    </li>
                                    <li class="nav-item nav-item-li">
                                        <a href="https://phalcon.link/resources" target="_blank">
                                            Resources
                                        </a>
                                    </li>
                                    <li class="nav-item nav-item-li">
                                        <a href="https://phalcon.link/f" target="_blank">
                                            Facebook
                                        </a>
                                    </li>
                                    <li class="nav-item nav-item-li">
                                        <a href="https://phalcon.link/t" target="_blank">
                                            Twitter
                                        </a>
                                    </li>
                                    <li class="nav-item nav-item-li">
                                        <a href="https://phalcon.link/gab" target="_blank">
                                            Gab.ai
                                        </a>
                                    </li>
                                </ul>
                            </div>
                            <div class="nav-item">
                                <a href="https://phalcon.link/about">
                                    About
                                </a>
                            </div>
                            <div class="nav-item">
                                <a href="https://phalcon.link/sponsors">
                                    Sponsors
                                </a>
                            </div>
                            <div class="nav-item">
                                <a href="https://phalcon.link/fund">
                                    Support Us
                                </a>
                            </div>
                            <div class="nav-item">
                                <a href="https://phalcon.link/download">
                                    Download
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>


    <div class="container-fluid article-page-wrap">
        <div class="row">
            <div>
                <div class="col-md-2 sidebar hidden-xs">
                    <div class="sidebar--spacer">&nbsp;</div>
                </div>
                <div class="m-t-md m-b-lg" id="articles">
                    <div class="article-content">
                        <p><a name="overview"></a></p>

<h1 id="Управление-ресурсами">Управление ресурсами</h1>

<p><code>Phalcon\Assets</code> — это компонент позволяющий разработчику управлять статичными ресурсами в веб-приложении, такими как каскадные таблицы стилей или скрипты.</p>

<p><a href="api/Phalcon_Assets_Manager">Phalcon\Assets\Manager</a> is available in the services container, so you can add resources from any part of the application where the container is available.</p>

<p><a name="add"></a></p>

<h2 id="Добавление-ресурсов">Добавление ресурсов</h2>

<p>Поддерживаются ресурсы двух типов: CSS и JavaScript. Но при необходимости, можно реализовать поддержку любых других. Внутренний механизм менеджера ресурсов хранит две коллекции, одну для JavaScript, а другую для CSS.</p>

<p>Добавить ресурсы в эти коллекции очень просто:</p>

<pre><code class="language-php">&lt;?php

use Phalcon\Mvc\Controller;

class IndexController extends Controller
{
    public function index()
    {
        // Добавляем некоторые локальные CSS ресурсы
        $this-&gt;assets-&gt;addCss('css/style.css');
        $this-&gt;assets-&gt;addCss('css/index.css');

        // А теперь некоторые локальные JavaScript ресурсы
        $this-&gt;assets-&gt;addJs('js/jquery.js');
        $this-&gt;assets-&gt;addJs('js/bootstrap.min.js');
    }
}
</code></pre>

<p>Далее, добавленные ресурсы могут быть отображены в представлениях:</p>

<pre><code class="language-php">&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Некоторый удивительный веб-сайт&lt;/title&gt;

        &lt;?php $this-&gt;assets-&gt;outputCss(); ?&gt;
    &lt;/head&gt;

    &lt;body&gt;
        &lt;!-- ... --&gt;

        &lt;?php $this-&gt;assets-&gt;outputJs(); ?&gt;
    &lt;/body&gt;
&lt;html&gt;
</code></pre>

<p>С использованием синтаксиса Volt:</p>

<pre><code class="language-volt">&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Some amazing website&lt;/title&gt;

        {{ assets.outputCss() }}
    &lt;/head&gt;

    &lt;body&gt;
        &lt;!-- ... --&gt;

        {{ assets.outputJs() }}
    &lt;/body&gt;
&lt;html&gt;
</code></pre>

<p>В целях достижения лучшей производительности, рекомендуется размещать загрузку JavaScript-скриптов в конце страницы, а не в <code>&lt;head&gt;</code>.</p>

<p><a name="local-remote"></a></p>

<h2 id="Локальныеудалённые-ресурсы">Локальные/удалённые ресурсы</h2>

<p>Локальные ресурсы это те, которые предоставляются вами в том же приложении. Обычно они расположены в корневом каталоге приложения. URLs in local resources are generated by the <code>url</code> service, usually <a href="api/Phalcon_Mvc_Url">Phalcon\Mvc\Url</a>.</p>

<p>Удалённые ресурсы, такие как общие библиотеки, например <a href="https://jquery.com">jQuery</a>, <a href="http://getbootstrap.com">Bootstrap</a> или пр., предоставляемые посредством <a href="https://en.wikipedia.org/wiki/Content_delivery_network">CDN</a>.</p>

<p>Второй параметр методов <code>addCss()</code> и <code>addJs()</code> говорит является ли ресурс локальным или нет (если <code>true</code>, то локальный, <code>false</code> — удалённый). По умолчанию, менеджер ресурсов будет предполагать, что ресурс является локальным:</p>

<pre><code class="language-php">&lt;?php

public function indexAction()
{
    // Add some remote CSS resources
    $this-&gt;assets-&gt;addCss('//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.4/css/bootstrap-combined.min.css', false);

    // Then add some local CSS resources
    $this-&gt;assets-&gt;addCss('css/style.css', true);
    $this-&gt;assets-&gt;addCss('css/extra.css');
}
</code></pre>

<p><a name="collections"></a></p>

<h2 id="Коллекции">Коллекции</h2>

<p>В коллекциях группируются однотипные ресурсы. Менеджер ресурсов всегда создает две коллекции: <code>css</code> и <code>js</code>. Для группирования специфичных ресурсов вы можете создавать дополнительные:</p>

<pre><code class="language-php">&lt;?php

// JavaScript ресурсы в коллекии header
$headerCollection = $this-&gt;assets-&gt;collection('header');

$headerCollection-&gt;addJs('js/jquery.js');
$headerCollection-&gt;addJs('js/bootstrap.min.js');

// JavaScript ресурсы в коллекии footer
$footerCollection = $this-&gt;assets-&gt;collection('footer');

$footerCollection-&gt;addJs('js/jquery.js');
$footerCollection-&gt;addJs('js/bootstrap.min.js');
</code></pre>

<p>Затем в представлении:</p>

<pre><code class="language-php">&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Некоторый удивительный веб-сайт&lt;/title&gt;

        &lt;?php $this-&gt;assets-&gt;outputJs('header'); ?&gt;
    &lt;/head&gt;

    &lt;body&gt;
        &lt;!-- ... --&gt;

        &lt;?php $this-&gt;assets-&gt;outputJs('footer'); ?&gt;
    &lt;/body&gt;
&lt;html&gt;
</code></pre>

<p>С использованием синтаксиса Volt:</p>

<pre><code class="language-twig">&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Some amazing website&lt;/title&gt;

        {{ assets.outputCss('header') }}
    &lt;/head&gt;

    &lt;body&gt;
        &lt;!-- ... --&gt;

        {{ assets.outputJs('footer') }}
    &lt;/body&gt;
&lt;html&gt;
</code></pre>

<p><a name="url-prefixes"></a></p>

<h2 id="url-префиксы">URL префиксы</h2>

<p>К коллекциям могут применяться URL префиксы, это позволит в любой момент легко изменить расположение ресурсов с одного сервера на другой:</p>

<pre><code class="language-php">&lt;?php

$footerCollection = $this-&gt;assets-&gt;collection('footer');

if ($config-&gt;environment === 'development') {
    $footerCollection-&gt;setPrefix('/');
} else {
    $footerCollection-&gt;setPrefix('http:://cdn.example.com/');
}

$footerCollection-&gt;addJs('js/jquery.js');
$footerCollection-&gt;addJs('js/bootstrap.min.js');
</code></pre>

<p>Также, доступен синтаксис цепочки (Method chaining):</p>

<pre><code class="language-php">&lt;?php

$headerCollection = $assets
    -&gt;collection('header')
    -&gt;setPrefix('http://cdn.example.com/')
    -&gt;setLocal(false)
    -&gt;addJs('js/jquery.js')
    -&gt;addJs('js/bootstrap.min.js');
</code></pre>

<p><a name="minification-filtering"></a></p>

<h2 id="МинификацияФильтрация">Минификация/Фильтрация</h2>

<p><code>Phalcon\Assets</code> предоставляет встроенную возможность минимизации JavaScript и CSS. Разработчик может создать коллекцию ресурсов, с указаниями для менеджера ресурсов, к каким ресурсам должны быть применены фильтры, а к каким нет. В дополнении к вышесказанному, <code>Jsmin</code> <a href="http://www.crockford.com">Дугласа Крокфорда (Douglas Crockford)</a> входит в состав ядра минимизации JavaScript для увеличения производительности. Для минимизации CSS используется <code>CSSMin</code> <a href="https://github.com/soldair">Райна Дэйя (Ryan Day)</a>.</p>

<p>Следующий пример показывает, как минимизировать набор ресурсов:</p>

<pre><code class="language-php">&lt;?php

$manager

    // Этот JavaScript расположен внизу страницы
    -&gt;collection('jsFooter')

    // Название получаемого файла
    -&gt;setTargetPath('final.js')

    // С таким URI генерируется тэг HTML
    -&gt;setTargetUri('production/final.js')

    // Это удалённый ресурс, не нуждающийся в фильтрации
    -&gt;addJs('code.jquery.com/jquery-1.10.0.min.js', false, false)

    // Это локальные ресурсы, к которым необходимо применить фильтры
    -&gt;addJs('common-functions.js')
    -&gt;addJs('page-functions.js')

    // Объединяем все ресурсы в один файл
    -&gt;join(true)

    // Используем встроенный фильтр Jsmin
    -&gt;addFilter(
        new Phalcon\Assets\Filters\Jsmin()
    )

    // Используем пользовательский фильтр
    -&gt;addFilter(
        new MyApp\Assets\Filters\LicenseStamper()
    );
</code></pre>

<p>Коллекция может содержать либо JavaScript, либо CSS ресурсы, но не оба типа ресурсов сразу. Некоторые ресурсы могут быть удалёнными, то есть, полученными с помощью HTTP-запроса для дальнейшей фильтрации. Рекомендуется преобразовывать внешние ресурсы в локальные, для устранения накладных расходов на их получение.</p>

<p>Как было замечено выше, метод <code>addJs()</code>, использующийся для добавления ресурсов в коллекцию, в качестве второго принимает параметр, указывающий является ли ресурс внешним или нет, а также третий параметр, указывающий, следует ли применять фильтр к ресурсу или оставить как есть:</p>

<pre><code class="language-php">&lt;?php

// Эти JavaScript ресурсы расположены внизу
$jsFooterCollection = $manager-&gt;collection('jsFooter');

// Это удалённый ресурс, не нуждающийся в фильтрации
$jsFooterCollection-&gt;addJs('code.jquery.com/jquery-1.10.0.min.js', false, false);

// Это локальные ресурсы, к которым необходимо применить фильтры
$jsFooterCollection-&gt;addJs('common-functions.js');
$jsFooterCollection-&gt;addJs('page-functions.js');
</code></pre>

<p>Фильтры регистрируются в коллекции. Допускается регистрировать несколько фильтров. Ресурсы в наборе фильтруются в том же порядке, в каком были зарегистрированы фильтры:</p>

<pre><code class="language-php">&lt;?php

// Используем встроенный фильтр Jsmin
$jsFooterCollection-&gt;addFilter(
    new Phalcon\Assets\Filters\Jsmin()
);

// Используем пользовательский фильтр
$jsFooterCollection-&gt;addFilter(
    new MyApp\Assets\Filters\LicenseStamper()
);
</code></pre>

<p>Обратите внимание, встроенные и пользовательские фильтры могут прозрачно применяться ко всей коллекции ресурсов. Последний шаг, определяет, стоит ли объединять все ресурсы набора в один файл, или использовать каждый по отдельности. Если все ресурсы набора должны объединяться в один файл, вы можете использовать метод <code>join()</code>.</p>

<p>Если ресурсы должны быть объединены, то вы должны также определить какой файл будет использоваться для хранения ресурсов и по какому URI он будет доступен. Эти параметры настраиваются при помощи методов <code>setTargetPath()</code> и <code>setTargetUri()</code>:</p>

<pre><code class="language-php">&lt;?php

$jsFooterCollection-&gt;join(true);

// Название получаемого файла
$jsFooterCollection-&gt;setTargetPath('public/production/final.js');

// С таким URI генерируется тэг HTML
$jsFooterCollection-&gt;setTargetUri('production/final.js');
</code></pre>

<p><a name="builtin-filters"></a></p>

<h3 id="Встроенные-фильтры">Встроенные фильтры</h3>

<p>Phalcon предоставляет два встроенных фильтра минимизации JavaScript и CSS ресурсов. Их реализация на языке Си обеспечивает минимальные накладные расходы для решения подобной задачи:</p>

<table>
  <thead>
    <tr>
      <th>Фильтр</th>
      <th>Описание</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="api/Phalcon_Assets_Filters_Jsmin">Phalcon\Assets\Filters\Jsmin</a></td>
      <td>Минимизирует JavaScript удаляя не нужны символы, которые игнорируются интерпретатором/компилятором JavaScript</td>
    </tr>
    <tr>
      <td><a href="api/Phalcon_Assets_Filters_Cssmin">Phalcon\Assets\Filters\Cssmin</a></td>
      <td>Минимизирует CSS удаляя ненужные символы, которые игнорируются браузерами</td>
    </tr>
  </tbody>
</table>

<p><a name="custom-filters"></a></p>

<h3 id="Пользовательские-фильтры">Пользовательские фильтры</h3>

<p>Кроме использования встроенных фильтров, вы можете создавать свои собственные фильтры. Вы можете воспользоваться существующими более продвинутыми инструментами, такими как <a href="http://yui.github.io/yuicompressor/">YUI</a>, <a href="http://sass-lang.com/">Sass</a>, <a href="https://developers.google.com/closure/compiler/">Closure</a> и другие:</p>

<pre><code class="language-php">&lt;?php

use Phalcon\Assets\FilterInterface;

/**
 * Фильтрация CSS содержимого при помощи YUI
 *
 * @param string $contents
 * @return string
 */
class CssYUICompressor implements FilterInterface
{
    protected $options;

    /**
     * Конструктор CssYUICompressor
     *
     * @param array $options
     */
    public function __construct(array $options)
    {
        $this-&gt;options = $options;
    }

    /**
     * Выполнение фильтрации
     *
     * @param string $contents
     *
     * @return string
     */
    public function filter($contents)
    {
        // Запись содержимого во временный файл
        file_put_contents('temp/my-temp-1.css', $contents);

        system(
            $this-&gt;options['java-bin'] .
            ' -jar ' .
            $this-&gt;options['yui'] .
            ' --type css ' .
            'temp/my-temp-file-1.css ' .
            $this-&gt;options['extra-options'] .
            ' -o temp/my-temp-file-2.css'
        );

        // Возвращаем содержимое файла
        return file_get_contents('temp/my-temp-file-2.css');
    }
}
</code></pre>

<p>Применение:</p>

<pre><code class="language-php">&lt;?php

// Получаем некоторую CSS коллекцию
$css = $this-&gt;assets-&gt;get('head');

// Добавляем (включаем) фильтр YUI-компрессор к коллекции
$css-&gt;addFilter(
    new CssYUICompressor(
        [
            'java-bin'      =&gt; '/usr/local/bin/java',
            'yui'           =&gt; '/some/path/yuicompressor-x.y.z.jar',
            'extra-options' =&gt; '--charset utf8',
        ]
    )
);
</code></pre>

<p>В предыдущем примере мы использовали пользовательский фильтр, который назывался <code>LicenseStamper</code>:</p>

<pre><code class="language-php">&lt;?php

use Phalcon\Assets\FilterInterface;

/**
 * Добавляет лицензионное собщение в начало файла
 *
 * @param string $contents
 *
 * @return string
 */
class LicenseStamper implements FilterInterface
{
    /**
     * Выполнение фильтрации
     *
     * @param string $contents
     * @return string
     */
    public function filter($contents)
    {
        $license = '/* (c) 2015 Ваше имя здесь */';

        return $license . PHP_EOL . PHP_EOL . $contents;
    }
}
</code></pre>

<p><a name="custom-output"></a></p>

<h2 id="Пользовательский-вывод">Пользовательский вывод</h2>

<p>Методы <code>outputJs()</code> и <code>outputCss()</code> создают необходимые HTML-тэги в соответствии с каждым типом ресурсов. Однако вы можете переопределить эти методы или выводить ресурсы вручную, используя следующий подход:</p>

<pre><code class="language-php">&lt;?php

use Phalcon\Tag;

$jsCollection = $this-&gt;assets-&gt;collection('js');

foreach ($jsCollection as $resource) {
    echo Tag::javascriptInclude(
        $resource-&gt;getPath()
    );
}
</code></pre>

<p><a name="improving-performance"></a></p>

<h2 id="Повышение-производительности">Повышение производительности</h2>

<p>There are many ways to optimize the processing resources. We’ll describe a simple method below which allows to handle resourses directly through web server to optimize the response time.</p>

<p>First we need to set up the Assets Manager. We’ll use base controller, but you can use the service provider or any other place:</p>

<pre><code class="language-php">&lt;?php

namespace App\Controllers;

use Phalcon\Mvc\Controller;
use Phalcon\Assets\Filters\Jsmin;

/**
 * App\Controllers\ControllerBase
 *
 * Это базовый контроллер для приложения.
 */
class ControllerBase extends Controller
{
    public function onConstruct()
    {
        $this-&gt;assets
            -&gt;useImplicitOutput(false)
            -&gt;collection('global')
            -&gt;addJs('https://code.jquery.com/jquery-3.4.1.js', false, true)
            -&gt;addFilter(new Jsmin());
    }
}
</code></pre>

<p>Затем, нам понадобится настроит маршрутизацию:</p>

<pre><code class="language-php">&lt;?php
/*
 * Определяем маршруты.
 * Этот файл будет подключен при определении сервиса router.
 */
$router = new Phalcon\Mvc\Router();

$router-&gt;addGet('/assets/(css|js)/([\w.-]+)\.(css|js)', [
    'controller' =&gt; 'assets',
    'action'     =&gt; 'serve',
    'type'       =&gt; 1,
    'collection' =&gt; 2,
    'extension'  =&gt; 3,
]);

// Другие маршруты...
</code></pre>

<p>Наконец нам нужно создать контроллер для обработки запросов ресурсов:</p>

<pre><code class="language-php">&lt;?php

namespace App\Controllers;

use Phalcon\Http\Response;

/**
 * Обработчик запросов ресурсов.
 */
class AssetsController extends ControllerBase
{
    public function serveAction() : Response
    {
        // Создаём экземпляр Response
        $response = new Response();

        // Подготавливаем пути
        $collectionName = $this-&gt;dispatcher-&gt;getParam('collection');
        $extension      = $this-&gt;dispatcher-&gt;getParam('extension');
        $type           = $this-&gt;dispatcher-&gt;getParam('type');
        $targetPath     = "assets/{$type}/{$collectionName}.{$extension}";

        // Настраиваем тип ответа
        $contentType = $type == 'js' ? 'application/javascript' : 'text/css';
        $response-&gt;setContentType($contentType, 'UTF-8');

        // Проверяем коллекцию на существование
        if (!$this-&gt;assets-&gt;exists($collectionName)) {
            return $response-&gt;setStatusCode(404, 'Not Found');
        }

        // Настраиваем коллекцию ресурсов
        $collection = $this-&gt;assets
            -&gt;collection($collectionName)
            -&gt;setTargetUri($targetPath)
            -&gt;setTargetPath($targetPath);

        // Сохраняем содержимое на диск и возвращаем полный путь к сохранённому файлу
        $contentPath = $this-&gt;assets-&gt;output($collection, function (array $parameters) {
            return BASE_PATH . '/public/' . $parameters[0];
        }, $type);

        // Устанавливаем содержимое ответа
        $response-&gt;setContent(file_get_contents($contentPath));

        // Возвращаем объект Response
        return $response;
    }
}
</code></pre>

<p>Если обработанные ресурсы существуют на диске, они должны быть возвращены непосредственно веб-сервером. Таким образом, чтобы получить выгоду от работы со статикой, мы должны обновить конфигурацию веб-сервера. В примере ниже мы будем использовать конфигурацию для Nginx. Настройка других веб-серверов, например Apache, будет немного отличаться:</p>

<pre><code class="language-nginx">location ~ ^/assets/ {
    expires 1y;
    add_header Cache-Control public;
    add_header ETag "";

    # Если статический ресур существует, обработать его веб-сервером,
    # без запуска PHP-приложения
    try_files $uri $uri/ @phalcon;
}

location / {
    try_files $uri $uri/ @phalcon;
}

location @phalcon {
    rewrite ^(.*)$ /index.php?_url=$1;
}
</code></pre>

<p>We need to create <code>assets/js</code> and <code>assets/css</code> directories in the document root of the application (eg. <code>public</code>).</p>

<p>Каждый раз, когда пользователь запрашивает статический ресурс вида <code>/assets/js/global.js</code>, запрос будет послан на обработку контроллером <code>AssetsController</code>, если файла ещё нет в файловой системе. В противном случае, ресурс будет возвращён веб-сервером.</p>

<p>It isn’t the best example. However, it reflects the main idea: the reasonable configuration of a web server with an application can help optimize response time multifold.</p>

<p>Learn more about the Web Server Setup and Routing in their dedicated articles <a href="/3.4/en/webserver-setup">Web Server Setup</a> and <a href="/3.4/en/routing">Routing</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>

<footer>
    <div class="container">
        <div class="footer-wrapper clearfix">

            <div class="footer-link-container">
                <a class="footer-link" href="/">
                    <img class="footer-logo-img" src="/assets/images/footer_logo.svg" alt="logo">
                </a>
                <a class="footer-link" href="https://phalcon.link/about" target="_blank">
                    About
                </a>
                <a class="footer-link" href="https://phalcon.link/sponsors" target="_blank">
                    Sponsors
                </a>
                <a class="footer-link" href="https://phalcon.link/fund" target="_blank">
                    Support Us
                </a>
                <a class="footer-link" href="https://phalcon.link/download" target="_blank">
                    Download
                </a>
                <a class="footer-link" href="https://license.phalconphp.com/" target="_blank">
                    License New BSD
                </a>
            </div>

            <div class="footer-copyright">
                <a href="https://odva.pro/" target="_blank" class="o2-link">
                    <span>Development by</span> <img src="/assets/images/logo-o2.svg" alt="logo o2">
                </a>
            </div>
        </div>
    </div>
</footer>

<script type="text/javascript" src="/assets/js/main.min.js?v1547319779866581049"></script>
<script type="text/javascript" src="/assets/js/highlight/highlight.pack.js?v1547319779866581049"></script>
<script type="application/javascript">hljs.initHighlightingOnLoad();</script>
<script type="application/javascript">hljs.initHighlightingOnLoad();</script>
</body>
</html>
