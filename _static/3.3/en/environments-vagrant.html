<!doctype html>
<!--[if IE 8]>
<html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]>
<html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en" class="no-js">
<!--<![endif]-->








    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <script type="text/javascript" src="/assets/js/viewport-min-width.js?v1547319779866581049"></script>
        <meta name="description"
              content="Official Phalcon Documentation">
        <meta name="keywords" content="php, phalcon, phalcon php, php framework, faster php framework, php extension, next generation framework, docs, documentation">
        <meta name="author" href="/humans.txt">
        <meta name="generator" content="Phalcon Team - Jekyll - Netlify">

        <link href="http://0.0.0.0:4000/3.3/en/environments-vagrant.html" rel="canonical">
        <title>Phalcon Framework Documentation</title>

        <!-- Twitter -->
        <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="@zephirlang">
        <meta name="twitter:creator" content="@zephirlang">
        <meta name="twitter:title" content="Phalcon Framework Documentation">
        <meta name="twitter:description" content="Official Phalcon Documentation">
        <meta name="twitter:image" content="https://assets.phalconphp.com/phalcon/logo.png">

        <!-- Facebook -->
        <meta property="og:url" content="http://0.0.0.0:4000">
        <meta property="og:title" content="Phalcon Framework Documentation">
        <meta property="og:description" content="Official Phalcon Documentation">
        <meta property="og:type" content="website">
        <meta property="og:image" content="https://assets.phalconphp.com/phalcon/logo.png">

        <meta name="msapplication-TileColor" content="#FFFFFF">
        <meta name="msapplication-square70x70logo"
              content="https://assets.phalconphp.com/phalcon/icons/mstile-70x70.png">
        <meta name="msapplication-TileImage"
              content="https://assets.phalconphp.com/phalcon/icons/mstile-144x144.png">
        <meta name="msapplication-square150x150logo"
              content="https://assets.phalconphp.com/phalcon/icons/mstile-150x150.png">
        <meta name="msapplication-wide310x150logo"
              content="https://assets.phalconphp.com/phalcon/icons/mstile-310x150.png">
        <meta name="msapplication-square310x310logo"
              content="https://assets.phalconphp.com/phalcon/icons/mstile-310x310.png">

        <link rel="apple-touch-icon"
              href="https://assets.phalconphp.com/phalcon/icons/apple-touch-icon.png">

        <link rel="apple-touch-icon-precomposed"
              sizes="57x57"
              href="https://assets.phalconphp.com/phalcon/icons/apple-touch-icon-57x57.png">
        <link rel="apple-touch-icon-precomposed"
              sizes="60x60"
              href="https://assets.phalconphp.com/phalcon/icons/apple-touch-icon-60x60.png">
        <link rel="apple-touch-icon-precomposed"
              sizes="72x72"
              href="https://assets.phalconphp.com/phalcon/icons/apple-touch-icon-72x72.png">
        <link rel="apple-touch-icon-precomposed"
              sizes="76x76"
              href="https://assets.phalconphp.com/phalcon/icons/apple-touch-icon-76x76.png">
        <link rel="apple-touch-icon-precomposed"
              sizes="114x114"
              href="https://assets.phalconphp.com/phalcon/icons/apple-touch-icon-114x114.png">
        <link rel="apple-touch-icon-precomposed"
              sizes="120x120"
              href="https://assets.phalconphp.com/phalcon/icons/apple-touch-icon-120x120.png">
        <link rel="apple-touch-icon-precomposed"
              sizes="144x144"
              href="https://assets.phalconphp.com/phalcon/icons/apple-touch-icon-144x144.png">
        <link rel="apple-touch-icon-precomposed"
              sizes="152x152"
              href="https://assets.phalconphp.com/phalcon/icons/apple-touch-icon-152x152.png">

        <link rel="icon"
              type="image/png"
              sizes="16x16"
              href="https://assets.phalconphp.com/phalcon/icons/favicon-16x16.png">
        <link rel="icon"
              type="image/png"
              sizes="32x32"
              href="https://assets.phalconphp.com/phalcon/icons/favicon-32x32.png">
        <link rel="icon"
              type="image/png"
              sizes="96x96"
              href="https://assets.phalconphp.com/phalcon/icons/favicon-96x96.png">
        <link rel="icon"
              type="image/png"
              sizes="128x128"
              href="https://assets.phalconphp.com/phalcon/icons/favicon-128x128.png">
        <link rel="icon"
              type="image/png"
              sizes="196x196"
              href="https://assets.phalconphp.com/phalcon/icons/favicon-196x196.png">
        <link rel="shortcut icon"
              type="image/png"
              href="https://assets.phalconphp.com/phalcon/favicon.ico"/>

        <link rel="alternate"
              type="application/rss+xml"
              title=" - "
              href="http://0.0.0.0:4000/feed.xml">

        <link rel="stylesheet"
              href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css"
              integrity="sha256-eSi1q2PG6J7g7ib17yAaWMcrr5GrtohYChqibrV7PBE="
              crossorigin="anonymous" />
        <link rel="stylesheet" href="/assets/css/monokai.css?v1547319779866581049" />
        <link rel="stylesheet" href="/assets/css/style.css?v1547319779866581049" />

        <script defer src="https://use.fontawesome.com/releases/v5.6.1/js/all.js"
                integrity="sha384-R5JkiUweZpJjELPWqttAYmYM1P3SNEJRM6ecTQF05pFFtxmCO+Y1CiUhvuDzgSVZ"
                crossorigin="anonymous"></script>
        
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-90300500-6"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-90300500-6');
    </script>

    </head>


<body onclick="o2.allNavSlideUp()">
    <header class="header-image-doc">
        <div class="container">
            <div class="header-wrapper">
                <div class="clearfix">
                    <div class="row">
                        <div class="col-md-2 col-sm-3  col-xs-8">
                            <div class="header-image__logo-wrapper">
                                <a href="/3.3/en">
                                    <img class="logo-img" src="/assets/images/header_logo.svg" alt="logo">
                                </a>
                            </div>
                        </div>
                        <div class="col-md-10 col-sm-9 top-menu">

                            <div class="nav-icon" onclick="o2.showMobileMenu();">
                                <div class="nav-line"></div>
                                <div class="nav-line"></div>
                                <div class="nav-line"></div>
                            </div>
                            <nav class="header-nav">
                                <ul>
                                    <li class="nav-item" onclick="o2.toggleState(this, event);">
                                        <div class="nav-item_selected">
                                            <img class="lang-image"
                                                 src="https://d2srrzh48sp2nh.cloudfront.net/31cd209e/images/flags/en-US.png"
                                                 alt="">
                                            <span class="caret"></span>
                                        </div>
                                        <div class="nav-item__list" onclick="event.stopPropagation();">
                                            
                                                <a href="/3.3/en/environments-vagrant" class="custom-select__list-item">
                                                    <img class="lang-image"
                                                         src="https://d2srrzh48sp2nh.cloudfront.net/31cd209e/images/flags/en-US.png"
                                                         alt="English (US)">
                                                    English (US)
                                                </a>
                                            
                                        </div>
                                    </li>

                                        <li class="nav-item" onclick="o2.toggleState(this, event);">
                                            <div class="nav-item__selected custom-select__version">
                                                Version 3.3
                                                <span class="caret"></span>
                                            </div>
                                            <div class="nav-item__list" onclick="event.stopPropagation();">
                                                
                                                <a href="/3.4/en/environments-vagrant" class="custom-select__list-item">
                                                    <span>3.4</span>
                                                </a>
                                                
                                                <a href="/3.3/en/environments-vagrant" class="custom-select__list-item">
                                                    <span>3.3</span>
                                                </a>
                                                
                                                <a href="/3.2/en/environments-vagrant" class="custom-select__list-item">
                                                    <span>3.2</span>
                                                </a>
                                                
                                                <a href="/3.1/en/environments-vagrant" class="custom-select__list-item">
                                                    <span>3.1</span>
                                                </a>
                                                
                                                <a href="/4.0/en/environments-vagrant" class="custom-select__list-item">
                                                    <span>4.0</span>
                                                </a>
                                                
                                            </div>
                                        </li>

                                    <li class="nav-item" onclick="o2.toggleState(this, event);">
                                        <div class="nav-item_selected">
                                            Community
                                            <span class="caret"></span>
                                        </div>
                                        <div class="nav-item__list">
                                            <a href="https://phalcon.link/forum" class="custom-select__list-item" target="_blank">
                                                Forum
                                            </a>
                                            <a href="https://phalcon.link/blog" class="custom-select__list-item" target="_blank">
                                                Blog
                                            </a>
                                            <a href="https://phalcon.link/resources" class="custom-select__list-item" target="_blank">
                                                Resources
                                            </a>
                                            <div class="nav-item__divider"></div>
                                            <a href="https://phalcon.link/f" class="custom-select__list-item" target="_blank">
                                                Facebook
                                            </a>
                                            <a href="https://phalcon.link/t" class="custom-select__list-item" target="_blank">
                                                Twitter
                                            </a>
                                            <a href="https://phalcon.link/gab" class="custom-select__list-item" target="_blank">
                                                Gab.ai
                                            </a>
                                        </div>
                                    </li>
                                    <li class="nav-item">
                                        <a href="https://phalcon.link/about">
                                            About
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="https://phalcon.link/sponsors">
                                            Sponsors
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="https://phalcon.link/fund">
                                            Support Us
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="https://phalcon.link/download">
                                            Download
                                        </a>
                                    </li>
                                </ul>
                            </nav>
                        </div>

                        <div class="header-nav-mobile">
                            <div>
                                <div class="nav-item nav-item-accordion" onclick="o2.topicsAccordion(this, event)">
                                    <img class="lang-image"
                                         src="https://d2srrzh48sp2nh.cloudfront.net/31cd209e/images/flags/en-US.png"
                                         alt="">
                                    <span class="caret"></span>
                                </div>

                                <ul style="display:none;" class="clearfix" onclick="event.stopPropagation();">
                                    
                                    <li class="nav-item nav-item-li col-sm-3 col-xs-6">
                                        <a href="/3.3/en/environments-vagrant">
                                            <img class="lang-image"
                                                 src="https://d2srrzh48sp2nh.cloudfront.net/31cd209e/images/flags/en-US.png"
                                                 alt="English (US)">
                                            <span></span>
                                        </a>
                                    </li>
                                    
                                </ul>

                            </div>
                            <div>
                                <div class="nav-item nav-item-accordion" onclick="o2.topicsAccordion(this,event)">
                                    Version 3.3
                                    <span class="caret"></span>
                                </div>

                                <ul style="display:none;" class="clearfix" onclick="event.stopPropagation();">
                                    
                                    <li class="nav-item nav-item-li col-xs-12">
                                        <a href="/3.4/en/environments-vagrant">
                                            <span>3.4</span>
                                        </a>
                                    </li>
                                    
                                    <li class="nav-item nav-item-li col-xs-12">
                                        <a href="/3.3/en/environments-vagrant">
                                            <span>3.3</span>
                                        </a>
                                    </li>
                                    
                                    <li class="nav-item nav-item-li col-xs-12">
                                        <a href="/3.2/en/environments-vagrant">
                                            <span>3.2</span>
                                        </a>
                                    </li>
                                    
                                    <li class="nav-item nav-item-li col-xs-12">
                                        <a href="/3.1/en/environments-vagrant">
                                            <span>3.1</span>
                                        </a>
                                    </li>
                                    
                                    <li class="nav-item nav-item-li col-xs-12">
                                        <a href="/4.0/en/environments-vagrant">
                                            <span>4.0</span>
                                        </a>
                                    </li>
                                    
                                </ul>

                            </div>
                            <div>
                                <div class="nav-item nav-item-accordion" onclick="o2.topicsAccordion(this, event)">
                                    
                                    <span class="caret"></span>
                                </div>
                                <ul style="display:none;">
                                    <li class="nav-item nav-item-li">
                                        <a href="https://phalcon.link/forum" target="_blank">
                                            Forum
                                        </a>
                                    </li>
                                    <li class="nav-item nav-item-li">
                                        <a href="https://phalcon.link/blog" target="_blank">
                                            Blog
                                        </a>
                                    </li>
                                    <li class="nav-item nav-item-li">
                                        <a href="https://phalcon.link/resources" target="_blank">
                                            Resources
                                        </a>
                                    </li>
                                    <li class="nav-item nav-item-li">
                                        <a href="https://phalcon.link/f" target="_blank">
                                            Facebook
                                        </a>
                                    </li>
                                    <li class="nav-item nav-item-li">
                                        <a href="https://phalcon.link/t" target="_blank">
                                            Twitter
                                        </a>
                                    </li>
                                    <li class="nav-item nav-item-li">
                                        <a href="https://phalcon.link/gab" target="_blank">
                                            Gab.ai
                                        </a>
                                    </li>
                                </ul>
                            </div>
                            <div class="nav-item">
                                <a href="https://phalcon.link/about">
                                    About
                                </a>
                            </div>
                            <div class="nav-item">
                                <a href="https://phalcon.link/sponsors">
                                    Sponsors
                                </a>
                            </div>
                            <div class="nav-item">
                                <a href="https://phalcon.link/fund">
                                    Support Us
                                </a>
                            </div>
                            <div class="nav-item">
                                <a href="https://phalcon.link/download">
                                    Download
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>


    <div class="container-fluid article-page-wrap">
        <div class="row">
            <div>
                <div class="col-md-2 sidebar hidden-xs">
                    <div class="sidebar--spacer">&nbsp;</div>
                </div>
                <div class="m-t-md m-b-lg" id="articles">
                    <div class="article-content">
                        <p><a name="overview"></a></p>
<h1 id="overview">Overview</h1>
<p>Phalcon Box uses the default <strong>phalcon/xenial64</strong> box from <a href="https://atlas.hashicorp.com/phalconphp/boxes/xenial64/">Vagrant Cloud</a> for compatibility. If you choose to use a 64-bit ISO you may need to update your BIOS to enable <a href="https://en.wikipedia.org/wiki/X86_virtualization">virtualization</a> with <code>AMD-V</code>, <code>Intel VT-x</code> or <code>VIA VT</code>.</p>

<p>The first time that you provision a new environment with <code>vagrant up</code>, the process will take a lot longer since the box (<code>phalconphp/xenial64</code>) will have to be downloaded to your local machine first. Any subsequent environment provisions will be much faster.</p>

<p><a name="requirements"></a></p>
<h2 id="requirements">Requirements</h2>
<ul>
  <li>Operating System: Windows, Linux, or macOS</li>
  <li><a href="https://www.virtualbox.org/wiki/Downloads">Virtualbox</a> &gt;= 5.1 (if you want to build the VirtualBox box)</li>
  <li><a href="http://www.vmware.com/products/fusion">VMware Fusion</a> (or Workstation - if you want to build the VMware box)</li>
  <li><a href="https://www.vagrantup.com/downloads.html">Vagrant</a> &gt;= 1.9.8</li>
</ul>

<p><a name="packages-included"></a></p>
<h2 id="packages-included">Packages Included</h2>
<ul>
  <li>Ansible</li>
  <li>Beanstalkd</li>
  <li>Blackfire</li>
  <li>Composer</li>
  <li>Git</li>
  <li>goreplace</li>
  <li>Mailhog</li>
  <li>Memcached</li>
  <li>MongoDB</li>
  <li>MySQL</li>
  <li>Nginx</li>
  <li>Ngrok</li>
  <li>Node.js (with Yarn, Bower, Grunt, and Gulp)</li>
  <li>PHIVE</li>
  <li>PHP 7.1</li>
  <li>PHPMD</li>
  <li>PHP_CodeSniffer</li>
  <li>Phalcon</li>
  <li>Phing</li>
  <li>PostgreSQL</li>
  <li>Redis</li>
  <li>Sqlite3</li>
  <li>Ubuntu 16.04</li>
  <li>Zephir</li>
</ul>

<p><a name="installation"></a></p>
<h2 id="installation">Installation</h2>
<p><a name="installation-vagrant-box"></a></p>
<h3 id="installing-the-vagrant-box">Installing the Vagrant Box</h3>
<p>Before launching your Phalcon Box environment, you must install VirtualBox, or VMWare as well as Vagrant. All of these software packages provide easy-to-use visual installers for all popular operating systems.</p>

<p>Once VirtualBox/VMWare and Vagrant have been installed, you should add the <code>phalconphp/xenial64</code> box to your Vagrant installation using the following command in your terminal. It will take a few minutes to download the box, depending on your Internet connection speed:</p>

<pre><code class="language-bash">vagrant box add phalconphp/xenial64
</code></pre>

<p>If this command fails, make sure your Vagrant installation is up to date.</p>

<h5 class="alert alert-warning">To use the VMware provider, you will need to purchase both VMware Fusion / Workstation and the <a href="https://www.vagrantup.com/vmware">VMware Vagrant plug-in</a>. Though it is not free, VMware can provide faster shared folder performance out of the box.  </h5>

<p><a name="installation-phalcon-box"></a></p>
<h3 id="installing-the-phalcon-box">Installing the Phalcon Box</h3>
<p>You can install Phalcon Box by simply cloning the repository. Consider cloning the repository into a <code>workspace</code> folder within your <code>home</code> directory, as the Phalcon Box box will serve as the host to all of your Phalcon projects:</p>

<pre><code class="language-bash">cd ~
git clone https://github.com/phalcon/box.git workspace
</code></pre>

<p>The <code>master</code> branch will always contain the latest stable version of Phalcon Box. If you wish to check older versions or newer ones currently under development, please switch to the relevant branch/tag.</p>

<p>You can find the latest stable version on the <a href="https://github.com/phalcon/box/releases">Github Release Page</a>:</p>

<pre><code class="language-bash"># Clone the desired release...
git checkout v2.4.0
</code></pre>

<p>Once you have cloned the Phalcon Box repository, run the install command from the Phalcon Box root directory to create the <code>settings.yml</code> configuration file. The <code>settings.yml</code> file will be placed in the Phalcon Box directory:</p>

<pre><code class="language-bash"># macOS || Linux
./install
</code></pre>

<pre><code class="language-cmd">rem Windows
install.bat
</code></pre>

<p>Now you are ready to provision your Virtual Machine, run:</p>

<pre><code class="language-bash">vagrant up
</code></pre>

<p><a name="installation-configuration"></a></p>
<h2 id="configuring">Configuring</h2>
<p><a name="installation-configuration-setting-provider"></a></p>
<h3 id="setting-your-provider">Setting your provider</h3>
<p>The provider key in your <code>settings.yml</code> file indicates which Vagrant provider should be used: <code>virtualbox</code>, <code>vmware_fusion</code> or <code>vmware_workstation</code>. You may set this to the provider you prefer:</p>

<pre><code class="language-yaml">provider: virtualbox
</code></pre>

<p><a name="installation-configuration-memory-cpu"></a></p>
<h3 id="memory-and-cpu">Memory and CPU</h3>
<p>By default this setup uses 2GB RAM. You can change this in <code>settings.yml</code> and simply run <code>vagrant reload</code>:</p>

<pre><code class="language-yaml">memory: 4096
</code></pre>

<p>You can also use more than one core if you like, simply change this line in the same file:</p>

<pre><code class="language-yaml">cpus: 4
</code></pre>

<p><a name="installation-configuration-shared-folders"></a></p>
<h3 id="shared-folders">Shared folders</h3>
<p>The <code>folders</code> property of the <code>settings.yml</code> file lists all of the folders you wish to share with your Phalcon Box environment. As files within these folders are changed, they will be kept in sync between your local machine and the Phalcon Box environment. You may configure as many shared folders as necessary:</p>

<pre><code class="language-yaml">folders:
    - map: ~/workspace
      to: /home/vagrant/workspace
</code></pre>

<p>To enable <a href="https://www.vagrantup.com/docs/synced-folders/nfs.html">NFS</a>, just add a simple flag to your synced folder configuration:</p>

<pre><code class="language-yaml">folders:
    - map: ~/workspace
      to: /home/vagrant/workspace
      type: "nfs"
</code></pre>

<p>You may also pass any options supported by Vagrant’s <a href="https://www.vagrantup.com/docs/synced-folders/basic_usage.html">Synced Folders</a> by listing them under the <code>options</code> key:</p>

<pre><code class="language-yaml">folders:
    - map: ~/workspace
      to: /home/vagrant/workspace
      type: "nfs"
      options:
            rsync__args: ["--verbose", "--archive", "--delete", "-zz"]
            rsync__exclude: ["node_modules"]
</code></pre>

<h5 class="alert alert-danger">macOS users probably will need to install <code>vagrant-bindfs</code> plugin to fix shared folder (NFS) permission issue: </h5>

<pre><code class="language-bash">vagrant plugin install vagrant-bindfs
</code></pre>

<p><a name="installation-configuration-nginx"></a></p>
<h3 id="nginx-sites">Nginx sites</h3>
<p>The <code>sites</code> property allows you to easily map a “domain” to a folder on your Phalcon Box environment. A sample site configuration is included in the <code>settings.yml</code> file. You may add as many sites to your Phalcon Box environment as necessary. Phalcon Box can serve as a convenient, virtualized environment for every Phalcon project you are working on:</p>

<pre><code class="language-yaml">sites:
    - map: phalcon.local
      to:  /home/vagrant/workspace/phalcon/public
</code></pre>

<p>You can use the <code>type</code> parameter to specify the type of Nginx configuration for the site. For example:</p>

<pre><code class="language-yaml">sites:
    - map:  landing.local
      to:   /home/vagrant/workspace/landing/public
      type: spa
</code></pre>

<p>The default type is <code>phalcon</code>. If the desired type is not allowed or not available <code>phalcon</code> will be used as fallback.</p>

<p>Available types:</p>

<ul>
  <li><code>phalcon</code></li>
  <li><code>slayer</code></li>
  <li><code>phanbook</code></li>
  <li><code>proxy</code></li>
  <li><code>spa</code></li>
  <li><code>silverstripe</code></li>
  <li><code>symfony2</code></li>
  <li><code>statamic</code></li>
  <li><code>laravel</code></li>
  <li><code>zend</code></li>
</ul>

<p>Feel free to suggest a new type of Nginx configuration <a href="https://github.com/phalcon/box/issues/new">through opening a New Feature Request</a>.</p>

<h5 class="alert alert-warning">If you change the <code>sites</code> property after provisioning the Phalcon Box, you must re-run <code>vagrant reload --provision</code> to update the Nginx configuration on the virtual machine. </h5>

<p><a name="installation-configuration-custom-nginx"></a></p>
<h4 id="custom-nginx-configuration">Custom Nginx configuration</h4>

<p>You can also create your own type. To do this take any template from the <code>provisioning/templates/nginx</code> folder as a basis and make the necessary changes. You need to place this file into the same folder. After that, you will be able to use your own custom type:</p>

<pre><code class="language-yaml">sites:
    - map:  my-site.local
      to:   /home/vagrant/workspace/my-site/public
      # provisioning/templates/nginx/phalcon-advanced.conf.j2
      type: phalcon-advanced
</code></pre>

<p>Do you need a custom <em>global</em> Nginx configuration? Yes, this is possible. Fox example, let’s create the autoindex configuration.</p>

<p>File <code>/home/user/nginx.d/00-autoindex.conf</code>:</p>

<pre><code class="language-nginx"># Processes requests ending with the slash character (‘/’) and produces a directory listing
autoindex on;
</code></pre>

<p>Add the desired settings to your file and then add it to the <code>copy</code> section:</p>

<pre><code class="language-yaml">copy:
    - from: /home/user/nginx.d/00-autoindex.conf
      to: /etc/nginx/conf.d/
</code></pre>

<p><a name="installation-configuration-hosts"></a></p>
<h4 id="configuring-the-hosts-file">Configuring the <code>hosts</code> file</h4>
<p>You must add the “domains” for your Nginx sites to the hosts file on your machine. The hosts file will redirect requests for your Phalcon sites into your Phalcon Box machine. On Mac and Linux, this file is located at <code>/etc/hosts</code>. On Windows, it is located at <code>C:\Windows\System32\drivers\etc\hosts</code>. The lines you add to this file will look like the following:</p>

<pre><code>192.168.50.4  phalcon.local
</code></pre>

<p>Make sure the IP address listed is the one set in your <code>settings.yml</code> file. Once you have added the domain to your <code>hosts</code> file and launched the Vagrant box you will be able to access the site via your web browser:</p>

<pre><code>http://phalcon.local
</code></pre>

<h5 class="alert alert-danger">To enable adding new sites to the <code>hosts</code> file automatically use <code>vagrant-hostsupdater</code> plugin: </h5>

<pre><code class="language-bash">vagrant plugin install vagrant-hostsupdater
</code></pre>

<p><a name="installation-aditional-packages"></a></p>
<h3 id="install-additional-packages">Install additional packages</h3>

<p>We did our best to provide Phalcon Box with all necessary programs and libraries. However, it should be understood that the typical user does not need all possible packages which can be installed. Phalcon Box must be of reasonable size so that it could be used by even those people who are experiencing difficulties with bandwidth of the Internet channel.</p>

<p>Because of these considerations, we allow users to specify which custom packages they need by every provision. To install the necessary packages add their names in the <code>apt</code> section:</p>

<pre><code class="language-yaml"># Provisioning features
provision:
    # do full system update for each full provisoning
    update: true

    # Install wkhtmltopdf and libffi-dev packages
    apt:
        - wkhtmltopdf
        - libffi-dev
</code></pre>

<p><a name="installation-launching-phalcon-box"></a></p>
<h3 id="launching-the-phalcon-box">Launching the Phalcon Box</h3>
<p>Once you have edited the <code>settings.yml</code> to your liking, run the <code>vagrant up</code> command from your Phalcon Box directory (for example <code>$HOME/workspace</code>). Vagrant will boot the virtual machine and automatically configure your shared folders and Nginx sites.</p>

<p>To destroy the machine, you may use the <code>vagrant destroy --force</code> command.</p>

<p><a name="daily-usage"></a></p>
<h2 id="daily-usage">Daily usage</h2>
<p><a name="daily-usage-accessing-box-globally"></a></p>
<h3 id="accessing-phalcon-box-globally">Accessing Phalcon Box globally</h3>
<p>Sometimes you may want to <code>vagrant up</code> your Phalcon Box machine from anywhere on your filesystem. You can do this on Mac or Linux systems by adding a <a href="http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-8.html">Bash function</a> to your Bash profile. On Windows, you may accomplish this by adding a “batch” file to your <code>PATH</code>. These scripts will allow you to run any Vagrant command from anywhere on your system and will automatically point that command to your Phalcon Box installation:</p>

<p><a name="daily-usage-accessing-box-globally-mac-linux"></a></p>
<h4 id="mac--linux">Mac || Linux</h4>

<pre><code class="language-bash">function box()
{
    ( cd $HOME/workspace &amp;&amp; vagrant $* )
}
</code></pre>

<h5 class="alert alert-warning">Make sure to tweak the <code>$HOME/workspace</code> path in the function to the location of your actual Phalcon Box installation. Once the function is installed, you may run commands like <code>box up</code> or <code>box ssh</code> from anywhere on your system. </h5>

<p><a name="daily-usage-accessing-box-globally-windows"></a></p>
<h4 id="windows">Windows</h4>
<p>Create a <code>box.bat</code> batch file anywhere on your machine with the following contents:</p>

<pre><code class="language-cmd">@echo off

set cwd=%cd%
set box=C:\workspace

cd /d %box% &amp;&amp; vagrant %*
cd /d %cwd%

set cwd=
set box=
</code></pre>

<h5 class="alert alert-warning">Make sure to tweak the example <code>C:\workspace</code> path in the script to the actual location of your Phalcon Box installation. After creating the file, add the file location to your <code>PATH</code>. You may then run commands like <code>box up</code> or <code>box ssh</code> from anywhere on your system. </h5>

<p><a name="daily-usage-ssh"></a></p>
<h3 id="connecting-via-ssh">Connecting via SSH</h3>
<p>You can SSH into your virtual machine by issuing the <code>vagrant ssh</code> terminal command from your Phalcon Box directory.</p>

<p>But, since you will probably need to SSH into your Phalcon Box machine frequently, consider adding the “function” <a href="#daily-usage-accessing-box-globally">described above</a> to your host machine to quickly SSH into the Phalcon Box.</p>

<p><a name="daily-usage-databases"></a></p>
<h3 id="connecting-to-databases">Connecting to databases</h3>

<p>To connect to your MySQL, Postgres or MongoDB database from your host machine’s database client, you should connect to <code>127.0.0.1</code> and port <code>33060</code> (MySQL), <code>54320</code> (Postgres) or <code>27017</code> (MongoDB). The username and password for databases is <code>phalcon</code> / <code>secret</code>.</p>

<h5 class="alert alert-danger">You should only use these non-standard ports when connecting to the databases from your host machine. You will use the default <code>3306</code> and <code>5432</code> ports in your Phalcon database configuration file since Phalcon is running within the Virtual Machine. </h5>

<p>To access to the interactive db console from Phalcon Box type:</p>

<ul>
  <li><strong>Postgres:</strong> <code>psql -U phalcon -h localhost</code> (password <code>secret</code>)</li>
  <li><strong>MySQL:</strong> <code>mysql</code> (password not needed for CLI tool)</li>
  <li><strong>MongoDB:</strong> <code>mongo</code> (password not needed for CLI tool)</li>
</ul>

<p><a name="daily-usage-additional-sites"></a></p>
<h3 id="adding-additional-sites">Adding additional sites</h3>
<p>Once your Phalcon Box environment is provisioned and running, you may want to add additional Nginx sites for your applications. You can run as many Phalcon projects as you wish on a single Phalcon Box environment. To add an additional site, simply add the site to your <code>settings.yml</code> file:</p>

<pre><code class="language-yaml">sites:
    - map: phalcon.local
      to:  /home/vagrant/workspace/phalcon/public
    - map: pdffiller.local
      to:  /home/vagrant/workspace/pdffiller/public
    - map: blog.local
      to:  /home/vagrant/workspace/blog/public
</code></pre>

<p>If Vagrant is not managing your “hosts” file automatically, you may need to add the new site to that file as well:</p>

<pre><code>192.168.50.4  phalcon.local
192.168.50.4  pdffiller.local
192.168.50.4  blog.local
</code></pre>

<h5 class="alert alert-danger">To enable adding new sites to the <code>hosts</code> file automatically use <code>vagrant-hostsupdater</code> plugin: </h5>

<pre><code class="language-bash">vagrant plugin install vagrant-hostsupdater
</code></pre>

<p>Once the site has been added, run the <code>vagrant reload --provision</code> command from your Phalcon Box directory.</p>

<p><a name="daily-usage-environment-variables"></a></p>
<h3 id="environment-variables">Environment variables</h3>
<p><a name="daily-usage-environment-global-variables"></a></p>
<h4 id="global-variables">Global variables</h4>
<p>You can easily register global environment variables. Just add variable and its value to the <code>variables</code> section:</p>
<pre><code class="language-yaml">variables:
    - key: TEST_DB_MYSQL_USER
      value: phalcon

    - key: TEST_DB_MYSQL_PASSWD
      value: secret

    - key: TEST_DB_MYSQL_DSN
      value: "mysql:host=127.0.0.1;dbname=phalcon_test"
</code></pre>

<p>This way you will be able to use these variables in your applications or scripts. For example when configuring <a href="http://codeception.com">Codeception</a> in such way:</p>

<pre><code class="language-yaml"># File codeception.yml
params:
    # Get params from environment
    - env
</code></pre>

<p>you will able to configure Unit suite as follows:</p>

<pre><code class="language-yaml"># File tests/unit.suite.yml
class_name: UnitTester
modules:
    enabled:
        - Db
    config
        Db:
            dsn: %TEST_DB_MYSQL_DSN%
            user: %TEST_DB_MYSQL_USER%
            password: %TEST_DB_MYSQL_PASSWD%
            populate: true
            cleanup: false
            dump: tests/_data/schemas/mysql/mysql.dump.sql
</code></pre>

<p><a name="daily-usage-environment-site-variables"></a></p>
<h4 id="site-variables">Site variables</h4>
<p>Site variables are how you can easily add <code>fastcgi_param</code> values to your site host configuration within Phalcon Box. For example, we may add a <code>APP_ENV</code> variable with the value <code>development</code>:</p>

<pre><code class="language-yaml">sites:
    - map: phalconbox.local
      to: /var/www/phalconbox/public
      variables:
          - key: APP_ENV
            value: development
          # Yet another example
          - key: AMQP_DEBUG
            value: true
</code></pre>

<p><a name="daily-usage-ports"></a></p>
<h3 id="ports">Ports</h3>
<p>By default, the following ports are forwarded to your Phalcon Box environment:</p>

<table>
  <thead>
    <tr>
      <th>Forwarded port</th>
      <th style="text-align: center">Phalcon Box</th>
      <th style="text-align: center">Host system</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>SSH</strong></td>
      <td style="text-align: center"><code>22</code></td>
      <td style="text-align: center"><code>2222</code></td>
    </tr>
    <tr>
      <td><strong>HTTP</strong></td>
      <td style="text-align: center"><code>80</code></td>
      <td style="text-align: center"><code>8000</code></td>
    </tr>
    <tr>
      <td><strong>HTTPS</strong></td>
      <td style="text-align: center"><code>443</code></td>
      <td style="text-align: center"><code>44300</code></td>
    </tr>
    <tr>
      <td><strong>MySQL</strong></td>
      <td style="text-align: center"><code>3306</code></td>
      <td style="text-align: center"><code>33060</code></td>
    </tr>
    <tr>
      <td><strong>Postgres</strong></td>
      <td style="text-align: center"><code>5432</code></td>
      <td style="text-align: center"><code>54320</code></td>
    </tr>
    <tr>
      <td><strong>MailHog</strong></td>
      <td style="text-align: center"><code>8025</code></td>
      <td style="text-align: center"><code>8025</code></td>
    </tr>
  </tbody>
</table>

<p><a name="daily-usage-ports-forwarding"></a></p>
<h4 id="forwarding-additional-ports">Forwarding additional ports</h4>
<p>If you wish, you may forward additional ports to the Phalcon Box, as well as specify their protocol:</p>

<pre><code class="language-yaml">ports:
    - send: 63790
      to: 6379
    - send: 50000
      to: 5000
    - send: 7777
      to: 777
      protocol: udp
</code></pre>

<p><a name="daily-usage-sharing-environment"></a></p>
<h3 id="sharing-your-environment">Sharing your environment</h3>
<p>Sometimes you may wish to share what you’re currently working on with coworkers or a client. Vagrant has a built-in way to support this via <code>vagrant share</code>; however, this will not work if you have multiple sites configured in your <code>settings.yml</code> file.</p>

<p>To solve this problem, Phalcon Box includes its own <code>share</code> command. To get started, SSH into your Phalcon Box machine via <code>vagrant ssh</code> and run <code>share &lt;your-site-here&gt;</code>, for example: <code>share blog.local</code>. This will share your site from your <code>settings.yml</code> configuration file. Of course, you may substitute any of your other configured sites for <code>blog.local</code>:</p>

<pre><code class="language-bash">share blog.local
</code></pre>

<p>After running the command, you will see an <a href="https://ngrok.com">Ngrok</a> screen appear which contains the activity log and the publicly accessible URLs for the shared site. If you would like to specify a custom region, subdomain, or other Ngrok runtime option, you may add them to your <code>share</code> command:</p>

<pre><code class="language-bash">share blog.local -region=eu -subdomain=phalcongelist
</code></pre>

<h5 class="alert alert-danger">Vagrant is inherently insecure and you are exposing your virtual machine to the Internet when running the <code>share</code> command. </h5>

<p><a name="daily-usage-network-interfaces"></a></p>
<h3 id="network-interfaces">Network interfaces</h3>
<p>The <code>networks</code> property of the <code>settings.yml</code> configures network interfaces for your Phalcon Box environment. You may configure as many interfaces as necessary:</p>

<pre><code class="language-yaml">networks:
    - type: "private_network"
      ip: "192.168.50.99"
</code></pre>

<p>To enable a <a href="https://www.vagrantup.com/docs/networking/public_network.html">bridged</a> interface, configure a <code>bridge</code> setting and change the network type to <code>public_network</code>:</p>

<pre><code class="language-yaml">networks:
    - type: "private_network"
      ip: "192.168.50.99"
      bridge: "en1: Wi-Fi (AirPort)"
</code></pre>

<p>To enable <a href="https://www.vagrantup.com/docs/networking/public_network.html">DHCP</a>, just remove the <code>ip</code> option from this configuration:</p>

<pre><code class="language-yaml">networks:
    - type: "private_network"
      bridge: "en1: Wi-Fi (AirPort)"
</code></pre>

<p><a name="daily-usage-updating-box"></a></p>
<h3 id="updating-phalcon-box">Updating Phalcon Box</h3>
<p>You can update Phalcon Box in two simple steps.</p>

<ol>
  <li>First, you will need to update the Vagrant box using the <code>vagrant box update</code> command:
    <pre><code class="language-bash">vagrant box update
</code></pre>
  </li>
  <li>Next, you need to update the Phalcon Box source code. If you cloned the repository you can simply
    <pre><code class="language-bash">git pull origin master
</code></pre>
    <p>at the location you originally cloned the repository.</p>
  </li>
</ol>

<p>The new version of Phalcon Box will contain updated or amended configuration files:</p>
<ul>
  <li><code>settings.yml</code></li>
  <li><code>.bash_aliases</code></li>
  <li><code>after_provision.sh</code></li>
</ul>

<p>When you run the command <code>./install</code> (or <code>install.bat</code>) the Phalcon Box creates these files in the root directory. However, if the files already exist, they will not be overwritten.</p>

<p>We recommend that you always take backups of those files, and remove them from the project so that the new updated ones can be copied over. You can then compare your own files with the phalcon box ones to apply your personalized changes and take advantage of the new features offered by the update.</p>

<p><a name="daily-usage-provider-settings"></a></p>
<h3 id="provider-specific-settings">Provider specific settings</h3>
<p><a name="daily-usage-provider-settings-virtualbox"></a></p>
<h4 id="virtualbox">VirtualBox</h4>
<p>By default, Phalcon Box configures the <code>natdnshostresolver</code> setting to <code>on</code>. This allows Phalcon Box to use your host operating system’s DNS settings. If you would like to override this behavior, add the following lines to your <code>settings.yml</code> file:</p>

<pre><code class="language-yaml">natdnshostresolver: off
</code></pre>

<p><a name="daily-usage-mail-catcher"></a></p>
<h3 id="mail-catcher">Mail catcher</h3>
<p>By default, Phalcon Box redirects all PHP emails to <a href="https://github.com/mailhog/MailHog">MailHog</a> (instead of sending them to the outside world). You can access the MailHog UI at <code>http://localhost:8025/</code> (or whatever domain you have configured in <code>settings.yml</code>).</p>

<p><a name="troubleshooting"></a></p>
<h2 id="troubleshooting">Troubleshooting</h2>

<p><strong>Problem:</strong></p>

<blockquote>
  <p>An error occurred in the underlying SSH library that Vagrant uses.
  The error message is shown below. In many cases, errors from this
  library are caused by ssh-agent issues. Try disabling your SSH
  agent or removing some keys and try again.
  If the problem persists, please report a bug to the net-ssh project.
  timeout during server version negotiating</p>
</blockquote>

<p><strong>Solution:</strong></p>

<pre><code class="language-bash">vagrant plugin install vagrant-vbguest
</code></pre>

<p><strong>Problem:</strong></p>

<blockquote>
  <p>Vagrant was unable to mount VirtualBox shared folders. This is usually
  because the filesystem “vboxsf” is not available. This filesystem is
  made available via the VirtualBox Guest Additions and kernel module.
  Please verify that these guest additions are properly installed in the
  guest. This is not a bug in Vagrant and is usually caused by a faulty
  Vagrant box. For context, the command attempted was:</p>

  <p>mount -t vboxsf -o uid=900,gid=900 vagrant /vagrant</p>
</blockquote>

<p><strong>Solution:</strong></p>

<pre><code class="language-bash">vagrant plugin install vagrant-vbguest
</code></pre>

<p><strong>Problem:</strong></p>

<blockquote>
  <p>There was an error while executing <code>VBoxManage</code>, a CLI used by Vagrant
  for controlling VirtualBox. The command and stderr is shown below.</p>

  <p>Command: <code>["startvm", "9d2b95e1-0fdd-40f4-ad65-4b56eb4315f8", "--type", "headless"]</code></p>

  <p>Stderr: VBoxManage.exe: error: VT-x is not available (VERR_VMX_NO_VMX)
  VBoxManage.exe: error: Details: code E_FAIL (0x80004005), component ConsoleWrap, interface IConsole</p>
</blockquote>

<p><strong>Solution:</strong></p>

<p>You need to update your BIOS to enable <a href="https://en.wikipedia.org/wiki/X86_virtualization">virtualization</a> with <code>Intel VT-x</code>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>

<footer>
    <div class="container">
        <div class="footer-wrapper clearfix">

            <div class="footer-link-container">
                <a class="footer-link" href="/">
                    <img class="footer-logo-img" src="/assets/images/footer_logo.svg" alt="logo">
                </a>
                <a class="footer-link" href="https://phalcon.link/about" target="_blank">
                    About
                </a>
                <a class="footer-link" href="https://phalcon.link/sponsors" target="_blank">
                    Sponsors
                </a>
                <a class="footer-link" href="https://phalcon.link/fund" target="_blank">
                    Support Us
                </a>
                <a class="footer-link" href="https://phalcon.link/download" target="_blank">
                    Download
                </a>
                <a class="footer-link" href="https://license.phalconphp.com/" target="_blank">
                    License New BSD
                </a>
            </div>

            <div class="footer-copyright">
                <a href="https://odva.pro/" target="_blank" class="o2-link">
                    <span>Development by</span> <img src="/assets/images/logo-o2.svg" alt="logo o2">
                </a>
            </div>
        </div>
    </div>
</footer>

<script type="text/javascript" src="/assets/js/main.min.js?v1547319779866581049"></script>
<script type="text/javascript" src="/assets/js/highlight/highlight.pack.js?v1547319779866581049"></script>
<script type="application/javascript">hljs.initHighlightingOnLoad();</script>
<script type="application/javascript">hljs.initHighlightingOnLoad();</script>
</body>
</html>
